(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{225:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"local-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#local-environment","aria-hidden":"true"}},[t._v("#")]),t._v(" Local Environment")]),t._v(" "),s("p",[t._v("This section will cover setup and requirements for Singles in your local environment. Before you begin, make sure your system meets all the requirements for local development.")]),t._v(" "),s("h2",{attrs:{id:"requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requirements","aria-hidden":"true"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),s("h3",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),s("p",[t._v("Singles uses "),s("a",{attrs:{href:"https://www.docker.com/get-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),s("OutboundLink")],1),t._v(" to create the server environment to develop your project. First you will need to download the client docker software.")]),t._v(" "),s("h3",{attrs:{id:"php-composer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-composer","aria-hidden":"true"}},[t._v("#")]),t._v(" PHP & Composer")]),t._v(" "),s("p",[t._v("Singles relies on "),s("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Composer"),s("OutboundLink")],1),t._v(" as a dependency manager and requires at least PHP 5.3.2+ to run.")]),t._v(" "),s("p",[t._v("For more information on installing PHP & Composer, see the following guides:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.jeffgeerling.com/blog/2018/installing-php-7-and-composer-on-windows-10",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows "),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://duvien.com/blog/installing-composer-mac-osx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac "),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-composer-on-ubuntu-18-04",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ubuntu "),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Not interested in installing PHP & Composer locally? Check out the "),s("router-link",{attrs:{to:"/faq/craft3/#bypassing-installing-php-composer-locally"}},[t._v("FAQ")]),t._v(" on how to use Composer on the docker instance to bypass this.")],1)]),t._v(" "),s("h2",{attrs:{id:"installing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installing","aria-hidden":"true"}},[t._v("#")]),t._v(" Installing")]),t._v(" "),s("p",[t._v("Singles can be downloaded or cloned from the "),s("a",{attrs:{href:"https://github.com/leaplogic/singles/tree/v3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Singles repository"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/leaplogic/singles.git\n")])])]),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("Make sure you have the "),s("code",[t._v("v3")]),t._v(" branch checked out by running "),s("code",[t._v("git checkout v3")]),t._v(" in your repository's working directory.")])]),t._v(" "),s("h2",{attrs:{id:"containers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#containers","aria-hidden":"true"}},[t._v("#")]),t._v(" Containers")]),t._v(" "),s("p",[t._v("Singles relies on Docker containers for standardization between the different computing environments.")]),t._v(" "),s("p",[t._v("Any time you are working with a Singles repository, you'll need to make sure you can build, start and stop containers. This section will cover the various container-related commands you'll need to be familiar with to get up and running.")]),t._v(" "),s("h3",{attrs:{id:"building-the-containers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#building-the-containers","aria-hidden":"true"}},[t._v("#")]),t._v(" Building the containers")]),t._v(" "),s("p",[t._v("To build the containers the first time, run")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker-compose up --build -d    \n")])])]),s("p",[t._v("This will build the instances using the respective Dockerfiles for each one. If all of the containers build successfully, it should also start up the containers.")]),t._v(" "),s("h3",{attrs:{id:"starting-up-containers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#starting-up-containers","aria-hidden":"true"}},[t._v("#")]),t._v(" Starting up containers")]),t._v(" "),s("p",[t._v("To start the containers, run")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker-compose up -d   \n")])])]),s("p",[t._v("The "),s("code",[t._v("-d")]),t._v(" argument is optional. It starts the container in detached mode which allows the containers to run in the background.")]),t._v(" "),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("You may need to run twice after first build")])]),t._v(" "),s("h3",{attrs:{id:"stopping-the-containers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stopping-the-containers","aria-hidden":"true"}},[t._v("#")]),t._v(" Stopping the containers")]),t._v(" "),s("p",[t._v("To stop the containers, run")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker-compose down\n")])])]),s("h3",{attrs:{id:"bashing-into-a-container"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bashing-into-a-container","aria-hidden":"true"}},[t._v("#")]),t._v(" Bashing into a container")]),t._v(" "),s("p",[t._v("Sometimes, it is necessary to have shell access in a container. You can do that, by running")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it singles_php_1 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),s("p",[t._v("where "),s("code",[t._v("singles_php_1")]),t._v(" is the "),s("code",[t._v("NAME")]),t._v(" of your singles_php image. To see a list of your running docker containers, you can run")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n")])])]),s("p",[t._v("For more information on the "),s("code",[t._v("docker exec")]),t._v(" command, check out the "),s("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/exec/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker docs"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#database","aria-hidden":"true"}},[t._v("#")]),t._v(" Database")]),t._v(" "),s("p",[t._v("needs content")]),t._v(" "),s("ul",[s("li",[t._v("explain how singles ships with a starting database with a default user and some other features.")]),t._v(" "),s("li",[t._v("explain how the variables in docker-compose.yml correlate with the db settings in craft and how to change them")])]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("Edit the "),s("code",[t._v("docker-composer.yml")]),t._v(" file in the root folder updating the database variables. "),s("em",[t._v("You don't have to changes these but you can as necessary")])]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[t._v("MYSQL_ROOT_PASSWORD=secret\nMYSQL_DATABASE=singles\nMYSQL_USER=root\nMYSQL_PASSWORD=secret\n")])])]),s("h3",{attrs:{id:"update-craft-database-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-craft-database-config","aria-hidden":"true"}},[t._v("#")]),t._v(" Update Craft Database Config")]),t._v(" "),s("p",[t._v("Edit the "),s("code",[t._v(".env.php")]),t._v(" file in the root of the project. Leave the "),s("code",[t._v("ENVIRONMENT")]),t._v(" as "),s("code",[t._v("dev")]),t._v(" for local development.  The database credentials are the same defaults as the Docker "),s("code",[t._v(".env")]),t._v(" file defaults out of the box.")]),t._v(" "),s("p",[t._v("Since we are using Craft CMS 3 you will need to add a random generated user key with letters and numbers.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_DRIVER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"mysql"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_SERVER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"mysql-server"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"docker"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"secret"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_DATABASE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"app"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_SCHEMA")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"public"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_TABLE_PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"craft"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"3306"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"dev"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECURITY_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"########################"')]),t._v("\n\n")])])]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[s("code",[t._v("mysql-server")]),t._v(" represents the Docker MYSQL container name that  what is used as the automatic DNS resolved name. Read more in the "),s("a",{attrs:{href:"https://docs.docker.com/network/bridge/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker docs"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("BE ADVISED")]),t._v(" "),s("p",[t._v("The port "),s("code",[t._v("3306")]),t._v(" is the default port for MySQL and is often is in use by other local programs. Check out the "),s("router-link",{attrs:{to:"/faq/craft3/#ports-in-use"}},[t._v("FAQ")]),t._v(" if you're encountering problems with your ports.")],1)]),t._v(" "),s("h2",{attrs:{id:"production-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#production-environment","aria-hidden":"true"}},[t._v("#")]),t._v(" Production Environment")]),t._v(" "),s("p",[t._v("This section covers how to set up Singles in a production environment. It's assumed that this environment is unix-based.")]),t._v(" "),s("h3",{attrs:{id:"server-requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server-requirements","aria-hidden":"true"}},[t._v("#")]),t._v(" Server Requirements")]),t._v(" "),s("p",[t._v("Craft 3 has a list of "),s("a",{attrs:{href:"https://docs.craftcms.com/v3/requirements.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("basic requirements"),s("OutboundLink")],1),t._v(" that must be met.")]),t._v(" "),s("p",[t._v("needs content")]),t._v(" "),s("ul",[s("li",[t._v("define any Singles specific requirements")]),t._v(" "),s("li",[t._v("explain server setup step-by-step as thoroughly as possible")]),t._v(" "),s("li",[t._v("should we add a staging environment and the needed documentation for that?")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"environment-variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#environment-variables","aria-hidden":"true"}},[t._v("#")]),t._v(" Environment Variables")]),t._v(" "),s("p",[t._v("In production you will need to add an "),s("code",[t._v(".env")]),t._v(" file to the root folder of the site and update the "),s("code",[t._v("ENVIRONMENT")]),t._v(" & database variables for the production environment.")]),t._v(" "),s("div",{staticClass:"language-PHP extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_DRIVER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"mysql"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// localhost most likely used for the server database")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_SERVER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"localhost"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"database-user"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"database-password"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_DATABASE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"database-name"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_SCHEMA")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"public"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_TABLE_PREFIX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"craft"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DB_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"3306"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'staging' or 'production'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"production"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECURITY_KEY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"########################"')]),t._v("\n\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);